import{h,b as I,d as N,E as R,r as q,H as x,g as D,i as F,j as E,k as L,l as g,m as C,U as H,n as O,o as U,p as Y,q as j,t as w,u as B,v as M,w as P,S as Z}from"./XA-waEqe.js";function G(r,f,c=!1){h&&I();var i=r,e=null,a=null,s=H,A=c?R:0,u=!1;const S=(l,t=!0)=>{u=!0,v(t,l)};var n=null;function o(){n!==null&&(n.lastChild.remove(),i.before(n),n=null);var l=s?e:a,t=s?a:e;l&&U(l),t&&Y(t,()=>{s?a=null:e=null})}const v=(l,t)=>{if(s===(s=l))return;let b=!1;if(h){const m=q(i)===x;!!s===m&&(i=D(),F(i),E(!1),b=!0)}var p=O(),d=i;if(p&&(n=document.createDocumentFragment(),n.append(d=L())),s?e??=t&&g(()=>t(d)):a??=t&&g(()=>t(d)),p){var _=C,T=s?e:a,k=s?a:e;T&&_.skipped_effects.delete(T),k&&_.skipped_effects.add(k),_.add_callback(o)}else o();b&&E(!0)};N(()=>{u=!1,f(S),u||v(null,null)},A),h&&(i=j)}function y(r,f){return r===f||r?.[Z]===f}function J(r={},f,c,i){return w(()=>{var e,a;return B(()=>{e=a,a=[],P(()=>{r!==c(...a)&&(f(r,...a),e&&y(c(...e),r)&&f(null,...e))})}),()=>{M(()=>{a&&y(c(...a),r)&&f(null,...a)})}}),r}export{J as b,G as i};
